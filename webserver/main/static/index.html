<html>
  <head>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.3/font/bootstrap-icons.css">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.2.4/jquery.min.js" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.8.3/underscore-min.js" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jsonform/2.2.5/jsonform.js" crossorigin="anonymous"></script>
    <title>ai-camera</title>
  </head>
  <body>
    <div class="container-fluid">
       <div class="row"><h2>ai-camera sandbox</h2></div>
        <div class="row" id="topUiRow" style="height:70%">
          <div class="col-4">
            <ul class="nav nav-tabs" id="configTab" role="tablist">
            <li class="nav-item active" role="presentation">
                <button class="nav-link" id="sensor-tab" data-bs-toggle="tab" data-bs-target="#sensor" type="sensor" role="tab" aria-controls="sensor" aria-selected="true">Image Sensor</button>
            </li>
            <li class="nav-item" role="presentation">
                <button class="nav-link" id="system-tab" data-bs-toggle="tab" data-bs-target="#system" type="button" role="tab" aria-controls="system" aria-selected="false">System</button>
            </li>
            <li class="nav-item" role="presentation">
                <button class="nav-link" id="cnn-tab" data-bs-toggle="tab" data-bs-target="#cnn" type="cnn" role="tab" aria-controls="cnn" aria-selected="false">CNN</button>
            </li>
            </ul>
            <div class="tab-content" id="configTabContent">
              <div class="tab-pane fade show active" id="sensor" role="tabpanel" aria-labelledby="sensor-tab">
                <form class="form-inline row g-3" style="overflow-y:scroll" id="imageSensorConfigForm">
                  <label>Resolution</label>
                  <div class="btn-group" role="group">
                    <input type="radio" class="btn-check" name="btnradio" id="cfgResolution160" autocomplete="off">
                    <label class="btn btn-outline-primary" for="cfgResolution160">160x120</label>

                    <input type="radio" class="btn-check" name="btnradio" id="cfgResolution320" autocomplete="off">
                    <label class="btn btn-outline-primary" for="cfgResolution320">320x240</label>

                    <input type="radio" class="btn-check" name="btnradio" id="cfgResolution640" autocomplete="off">
                    <label class="btn btn-outline-primary" for="cfgResolution640">640x480</label>

                    <input type="radio" class="btn-check" name="btnradio" id="cfgResolution800" autocomplete="off">
                    <label class="btn btn-outline-primary" for="cfgResolution800">800x600</label>

                    <input type="radio" class="btn-check" name="btnradio" id="cfgResolution1600" autocomplete="off">
                    <label class="btn btn-outline-primary" for="cfgResolution1600">1600x1200</label>
                  </div>
                  <button class="btn btn-primary" id="submitImageSensorConfig" type="submit">Save</button>
                </form>
              </div>
              <div class="tab-pane fade overflow-auto" id="system" role="tabpanel" aria-labelledby="system-tab">
                <form id="systemConfigForm">
                  <div class="form-check form-switch">
                    <input class="form-check-input" type="checkbox" id="enablePIR">
                    <label class="form-check-label" for="enablePIR" >Enable PIR motion detection</label>
                  </div>
                  <button class="btn btn-primary" id="submitSystemConfig" type="submit">Save</button>
                </form>
                </div>
                <div class="tab-pane fade overflow-auto" id="cnn" role="tabpanel" aria-labelledby="cnn-tab">
                  TODO
                </div>
            </div>
          </div>
          <div class="col">
            <div class="row">
                <img id="viewport" height="600px" src="/image.jpg"
                    onerror="this.onerror=null, this.src='data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNk+A8AAQUBAScY42YAAAAASUVORK5CYII='">
            </div>
            <div class="row gap-5" style="margin: 5px">
              <button type="button" id="playStream" class="col btn btn-outline-success">Run stream <span class="bi bi-file-play-fill"></button>
              <button type="button" id="stopStream" class="col btn btn-outline-danger">Stop stream <span class="bi bi-pause-btn-fill"></button>
              <button type="button" id="getJPEG" class="col btn btn-outline-primary">JPEG <span class="bi bi-download"></button>
              <button type="button" id="getYUV422" class="col btn btn-outline-primary">YUV422 <span class="bi bi-download"></button>
              <button type="button" id="getRGB565" class="col btn btn-outline-primary">RGB565 <span class="bi bi-download"></button>
            </div>
          </div>
        </div>
        <div class="row">
          <h4>Stats</h4>
          <div class="row">
            <dt class="col">CPU0, %</dt><dl class="col" id="cpu0Val">10</dl>
            <dt class="col">CPU1, %</dt><dl class="col" id="cpu1Val">1</dl>
            <dt class="col">DRAM, kB</dt><dl class="col" id="dramVal">157</dl>
            <dt class="col">PSRAM, kB</dt><dl class="col" id="psramVal">7512</dl>
          </div>
          <div class="row">
            <dt class="col">Chip temp, C</dt><dl class="col" id="tempVal">25</dl>
            <dt class="col">FPS</dt><dl class="col" id="fpsVal">n/a</dl>
            <dt class="col">Light, lux</dt><dl class="col" id="lightVal">100</dl>
            <dt class="col">Motion</dt><dl class="col" id="motionVal">0</dl>
          </div>
          <div class="row">
            <dt class="col">IR state</dt><dl class="col" id="irStateVal">Day</dl>
            <dt class="col">Battery, mV</dt><dl class="col" id="vbatVal">3851</dl>
            <dt class="col"></dt><dl class="col"></dl>
            <dt class="col"></dt><dl class="col"></dl>
          </div>
        </div>
    </div>
    <script type="text/javascript">
        $('#imageSensorConfigForm').css('height', $('#topUiRow').outerHeight() - 30)
        $('#imageSensorConfigForm').jsonForm({
        schema: {
            name: {
            type: 'string',
            title: 'Name',
            required: true
            },
            age: {
            type: 'number',
            title: 'Age'
            },
            age2: {
            type: 'number',
            title: 'Age'
            },
            age3: {
            type: 'number',
            title: 'Age'
            },
            age4: {
            type: 'number',
            title: 'Age'
            },
            age5: {
            type: 'number',
            title: 'Age'
            },
            age6: {
            type: 'number',
            title: 'Age'
            },
            age7: {
            type: 'number',
            title: 'Age'
            },
            age8: {
            type: 'number',
            title: 'Age'
            },
            age9: {
            type: 'number',
            title: 'Age'
            },
        },
        onSubmit: function (errors, values) {
            if (errors) {
            $('#res').html('<p>I beg your pardon?</p>');
            } else {
            $('#res').html('<p>Hello ' + values.name + '.' +
                (values.age ? '<br/>You are ' + values.age + '.' : '') +
                '</p>');
            }
        }
        });
    </script>
  </body>
</html>
